# 目录结构及VIM

### 文件系统

文件系统就是操作管理存储设备或分区上的文件的方法和数据结构；即存储设备上组织文件的方式。操作系统中负责管理和存储文件信息的软件机构叫文件管理系统，简称文件系统。

- fat16（MS-DOS 6.x），分区最大为2G
- fat32（windows 95），单个文件不能大于4G，性能较弱，容易产生碎片
- ntfs（windows NT），提升了fat文件系统的稳定性
- ext4（linux），扩展性日志文件系统
- hfs[+]（mac），苹果电脑的文件系统
- exfat（win/mac），可以支持4G以上的文件，适合于闪存

### 目录结构

- linux和windows文件系统的差别非常之大，没有C/D/E等盘符，而是从'/'开始，只有它没有上一级目录，它出路目录层级的最顶层，将整个的目录结构倒过来看像一棵树，而'/'处于树根的位置，因此'/'称为根目录。

- 目录结构说明

  | 目录          | 说明                                  |
  | ----------- | ----------------------------------- |
  | /           | 根目录，没有上级目录，处于最顶层                    |
  | /bin        | 大多数的操作命令                            |
  | /boot       | 启动文件                                |
  | /dev        | device,设备文件(一切设备皆文件)                |
  | /etc        | 配置文件                                |
  | /home       | 普通用户的家目录，一个用户一个目录                   |
  | /lib        | 库文件                                 |
  | /lib64      | 64位的库文件                             |
  | /lost+found | 出现异常(非法关机)时保存信息，通常是空的               |
  | /media      | 自动识别的设备挂载点                          |
  | /mnt        | mount，专门用于挂载的目录                     |
  | /opt        | option，安装可选软件的目录                    |
  | /proc       | 虚拟的文件系统，可以映射硬件信息                    |
  | /root       | 超级用户的家目录                            |
  | /sbin       | 超级用户使用的命令                           |
  | /selinux    | selinux软件目录，用户保证系统安全                |
  | /srv        | service，存储本机及本机服务器提供的数据或服务          |
  | /sys        | 类似于/proc的虚拟文件系统，存放内核数据信息            |
  | /tmp        | 保存随时可能销毁的临时文件                       |
  | /usr        | unix system resource，存放用户安装的软件      |
  | /var        | 系统产生的不可自动销毁的文件，如：log、mail、database等 |

### VIM编辑器

简介：vi是一款默认的终端编辑器，后来有了vi的加强版vim。被誉为"终端编辑器之神"

安装：`yum install -y vim`

使用：因为所有操作都是在终端完成的，是通过不同的模式切换来完成特定的功能的。

1. 正常模式(命令模式)，使用vim打开文件的默认模式

   | 命令/操作           | 功能说明                      |
   | --------------- | ------------------------- |
   | vim filename    | 打开/新建文件(新建文件有内容时才会真的创建)   |
   | esc             | 切换到正常模式                   |
   | ZZ(shift + zz)  | 保存退出                      |
   | 定位光标            |                           |
   | vim filename +n | 打开文件，将光标定位到第n行，不写n则定位文件末尾 |
   | gg              | 将光标定位到首行                  |
   | G               | 将光标定位到尾行                  |
   | ngg             | 将光标定位到第n行，n表示行号           |
   | 0               | 将光标定位到行首(数字0)             |
   | ^               | 将光标定位到第一个非空字符             |
   | $               | 将光标定位行尾                   |
   | k               | ↑                         |
   | j               | ↓                         |
   | h               | ←                         |
   | l               | →                         |
   | ctrl + f        | 向下翻一页                     |
   | ctrl + b        | 向上翻一页                     |
   | ctrl + d        | 向下翻半页                     |
   | ctrl + u        | 向上翻半页                     |
   | 内容处理            |                           |
   | x               | 向右删除一个字符                  |
   | nx              | 向右删除n个字符，n表示字符个数          |
   | X               | 向左删除一个字符                  |
   | nX              | 向左删除n个字符，n表示字符个数          |
   | dd              | 删除光标所在行                   |
   | ndd             | 向下删除光标开始的n行               |
   | p               | 粘贴剪切板中的内容                 |
   | yy              | 复制光标所在行                   |
   | nyy             | 复制光标开始的n行                 |
   | u               | 撤销刚才的操作                   |
   | ctrl + r        | 反撤销操作                     |

2. 插入模式(输入模式)，从键盘获取内容，完成文件的内容编写操作，进入插入模式：

   | 命令   | 说明                  |
   | ---- | ------------------- |
   | i    | 在光标位置插入             |
   | I    | 在行首第一个非空字符位置插入      |
   | a    | 在光标的下一个字符位置插入       |
   | A    | 在行尾位置插入             |
   | o    | 在光标所在的下一行插入空行       |
   | O    | 在光标所在的上一行插入空行       |
   | s    | 删除光标所在位置字符，然后进入插入模式 |
   | S    | 删除光标所在行，然后进入插入模式    |

3. 编辑模式(单行模式)，完成整个文件的编辑操作(保存)，输入':'即可进入


| 命令                | 说明                       |
| ----------------- | ------------------------ |
| :w                | 保存文件，不退出vim              |
| :q                | 退出vim                    |
| :wq               | 保存并退出                    |
| :w newfile        | 文件另存为                    |
| :w!               | 强制保存                     |
| :q!               | 强制退出，不会保存修改              |
| :x                | 保存并退出，等价于 :wq            |
| :e!               | 放弃修改，恢复到修改之前的文本          |
| 配置                |                          |
| :set nu[mber]     | 显示行号                     |
| :set nonu[mber]   | 隐藏行号                     |
| :set tabstop=4    | 设置一个tab等于几个空格            |
| :set mouse=a      | 请用鼠标点击功能                 |
| 查找替换              |                          |
| [:]/内容            | 查找内容，n下翻，N上翻             |
| [:]?内容            | 查找内容，N下翻，n上翻             |
| :%s/原内容/新内容/[g]   | 全局替换(使用新内容替换原内容)，g表示全局   |
| :m,ns/原内容/新内容/[g] | 替换m至n行内的内容，g不叫只会替换每行的第一个 |
| 光标定位              |                          |
| :n                | 光标定位第n行，n表示行号            |

4. 总结

   1. 在编辑模式下的配置都是临时的，关闭vim后就失效了
   2. 永久生效需要配置文件的支持，即将配置内容写入文件(~/.vimrc)
   3. 配置在打开终端时加载生效，可以通过打开新的终端，或者重启电脑，也可以通过命令，操作如下：source ~/.vimrc
   4. 若非正常的关闭了vim，则会产生交换文件，下次打开文件时会出现怪异的页面，删除对应的交换文件后，再次打开就正常了。(交换文件隐藏文件，ls -a可看到)

###man手册使用

- 安装：`yum install -y man`

- 简介：man是manual的简写，是一个命令，提供了标准帮助文档的查询功能

- 使用：

  | 操作         | 说明              |
  | ---------- | --------------- |
  | man name   | 查询指定的命令/函数的帮助文档 |
  | q          | 退出查询            |
  | ↓ 或者 enter | 向下翻一行           |
  | ↑          | 向上翻一行           |
  | pageup     | 向上翻一页           |
  | pagedown   | 向下翻一页           |
  | 空格         | 向下翻一页           |
  | ?内容        | 查找指定内容，n下翻，N上翻  |

### help使用

- 查看命令的帮助文档
- 格式：`ls --help`

### 使用命令

- 命令格式

  `命令 [选项] [参数]`

  []：表示可选的意思

- 例子：ls -l /etc

- 目录相关符号

  | 符号   | 说明         |
  | ---- | ---------- |
  | ~    | 当前登录用户的家目录 |
  | /    | 系统的根目录     |
  | .    | 表示当前目录     |
  | ..   | 表示上一级目录    |
  | -    | 表示刚才切换的目录  |

- ls命令

  | 选项   | 说明                   |
  | ---- | -------------------- |
  | -a   | 显示所有，包括隐藏文件(以.开头的文件) |
  | -l   | 列表显示                 |
  | -h   | 人性化的显示，会显示K/M/G      |

  ls -l显示结果说明：

  `文件类型及权限|引用数 | 用户 |用户组 | 文件大小 | 月份 | 日 | 时间/年 | 文件名称`

  文件类型：

  ```
  - ： 表示普通文件
  d ： 表示目录文件(文件夹)
  l ： 链接文件
  b :  块设备文件
  c :  字符设备
  s :  套接字
  p :  管道文件
  ```

  ​